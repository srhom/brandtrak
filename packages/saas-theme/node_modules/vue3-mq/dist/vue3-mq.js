"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const s=require("vue"),b=s.ref([]),O=s.ref(null),I=s.ref(null),E=s.ref(null),L=s.ref(null),l=s.reactive({current:""}),M=[],C=s.ref(!1),d=s.readonly(b),Y=s.readonly(O),Z=s.readonly(I),F=s.readonly(E),G=s.readonly(L),c=s.readonly(l),J=e=>{b.value=e},H=e=>{O.value=e},U=e=>{I.value=e},W=e=>{E.value=e},X=e=>{L.value=e},_=(e=Y.value)=>{l.current=e;const n=d.value.findIndex(t=>t.name===e),o=d.value.map(t=>t.name);for(let t=0;t<o.length;t++){if(t>0&&t<o.length-1){const r=o[t]+"Minus",a=o[t]+"Plus";l[r]=n<=t,l[a]=n>=t}l[o[t]]=o[t]===e}},ee=()=>{const e=Object.keys(l);for(let n of e)delete l[n];_(),j(),P(),A()},j=(e=Z.value)=>{l.orientation=e,l.isLandscape=e==="landscape",l.isPortrait=e==="portrait"},P=(e=F.value||"light")=>{l.theme=e,l.isDark=e==="dark",l.isLight=e==="light"},A=(e=G.value||"no-preference")=>{l.motionPreference=e,l.isMotion=e==="no-preference",l.isInert=e==="reduce"};function te(){for(;M.length>0;){const e=M.shift();if(e&&typeof e=="object"){const{mql:n,cb:o}=e;n.addEventListener&&typeof n.addEventListener=="function"?n.removeEventListener("change",o):n.removeListener(o)}}}function ne(){return d.value.reduce((n,o,t,r)=>{const a=`(min-width: ${o.min}px)`,i=t<r.length-1?`(max-width: ${r[t+1].min-1}px)`:null,u=a+(i?" and "+i:"");return Object.assign(n,{[o.name]:u})},{})}function h(e,n){if(typeof window>"u"||!window.matchMedia)return!1;if(typeof window<"u"&&!window.matchMedia)return console.error("Vue3 Mq: No MatchMedia support detected in this browser. Responsive breakpoints not available."),!1;{C.value=!0;const o=window.matchMedia(e),t=({matches:a})=>{a&&n()};M.push({mql:o,cb:t}),o.addEventListener&&typeof o.addEventListener=="function"?o.addEventListener("change",t):o.addListener(t),t(o)}}const f=e=>d.value.some(n=>n.name===e),B=(e,n)=>{const o=n.value.map(t=>t.name);if(e){if(Array.isArray(e))return e.filter(t=>f(t));if(typeof e=="string"&&/\w+\+$/.test(e)){if(e=e.replace(/\+$/,""),f(e)===!1)return console.error(`Vue3 Mq: ${e} is not a valid breakpoint key. Invalid range.`),o;const t=n.value.findIndex(r=>r.name===e);return n.value.slice(t).map(r=>r.name)}else if(typeof e=="string"&&/\w+-$/.test(e)){if(e=e.replace(/-$/,""),f(e)===!1)return console.error(`Vue3 Mq: ${e} is not a valid breakpoint key. Invalid range.`),o;const t=n.value.findIndex(r=>r.name===e);return n.value.slice(0,t+1).map(r=>r.name)}else if(typeof e=="string"&&/^\w+-\w+$/.test(e)){const[t,r]=e.split("-");if(f(t)===!1)return console.error(`Vue3 Mq: ${t} is not a valid breakpoint key. Invalid range.`),o;if(f(r)===!1)return console.error(`Vue3 Mq: ${r} is not a valid breakpoint key. Invalid range.`),o;const a=n.value.findIndex(u=>u.name===t),i=n.value.findIndex(u=>u.name===r);return n.value.slice(a,i+1).map(u=>u.name)}else return typeof e=="string"&&f(e)===!0?[e]:o}else return o},S=(e,n)=>{const o=[];return!e&&!n?["landscape","portrait"]:(e&&o.push("landscape"),n&&o.push("portrait"),o)},V=(e,n)=>{const o=[];return!n&&!e?["light","dark"]:(n&&o.push("light"),e&&o.push("dark"),o)},$=(e,n)=>{const o=[];return!e&&!n?["reduce","no-preference"]:(e&&o.push("reduce"),n&&o.push("no-preference"),o)},oe={xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400},re={xs:0,sm:576,md:768,lg:992,xl:1200},ae={xs:0,sm:768,md:992,lg:1200},se={xs:0,sm:600,md:960,lg:1264,xl:1904},ie={xs:0,sm:640,md:768,lg:1024,xl:1280,xxl:1536},le={phone:0,tablet:768,laptop:1370,desktop:1906},ue={mobile:0,small:600,medium:782,large:960,xlarge:1080,wide:1280,huge:1440},k=Object.freeze(Object.defineProperty({__proto__:null,bootstrap5:oe,bootstrap4:re,bootstrap3:ae,vuetify:se,tailwind:ie,devices:le,wordpress:ue},Symbol.toStringTag,{value:"Module"})),ce=e=>{if(typeof e=="string"&&k[e])return k[e];{const n=Object.keys(k);return console.error(`Vue3 Mq: "${e}" is not a valid preset. Available options are: ${n.join(", ")}`),!1}},de=e=>["landscape","portrait"].includes(e)===!1?(console.error(`Vue3 Mq: "${e}" is not a valid default orientation. Reverting to unset value.`),null):e,fe=(e=null)=>["dark","light"].includes(e)===!1&&e!==null?(console.error(`Vue3 Mq: "${e}" is not a valid default theme. Reverting to unset value.`),null):e,pe=(e=null)=>["no-preference","reduce"].includes(e)===!1&&e!==null?(console.error(`Vue3 Mq: "${e}" is not a valid default motion preference. Reverting to unset value.`),null):e,R=e=>{if(!e||typeof e!="object")return!1;const n=[];for(let r in e){const a=parseFloat(e[r]);if(!r||typeof r!="string"){console.warn(`Vue3 Mq: Invalid or missing breakpoint key (${JSON.stringify(r)}). Skipping.`);continue}else if(/^[^a-z]/i.test(r)||/[^a-zA-Z0-9_]/.test(r)){console.warn(`Vue3 Mq: "${r}" is an invalid breakpoint key. Breakpoint keys must start with a letter and contain only alphanumeric characters and underscores. Skipping.`);continue}else if(!a&&a!==0||isNaN(a)||a<0){console.warn(`Vue3 Mq: "${r}: ${e[r]}" is not a valid breakpoint. Breakpoints should be a number of zero or above. Skipping.`);continue}n.push({name:r,min:a})}return n.some(r=>r.min===0)||console.warn("Vue3 Mq: You have not declared a breakpoint with a minimum value of 0. There may be screen sizes to which Vue3Mq does not respond."),new Set(n.map(r=>r.min)).size<n.length&&console.warn("Vue3 Mq: Your breakpoint configuration contains duplicate values. Behaviour may be unpredictable."),n.length===0?!1:n.sort((r,a)=>r.min-a.min)},me=e=>{const n=e.split(":"),o={};for(let t of n)/\D/.test(t)!==!1&&(["landscape","portrait"].includes(t)?o.slotOrientation=t:["light","dark"].includes(t)?o.slotTheme=t:["inert","motion"].includes(t)?o.slotMotion=t:o.slotBp=t);return o},ve={name:"fade",mode:"out-in"},he={name:"MqResponsive",props:{target:[String,Array],landscape:{type:Boolean,default:!1},portrait:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},light:{type:Boolean,default:!1},inert:{type:Boolean,default:!1},motion:{type:Boolean,default:!1},tag:{type:String,default:"div"},listTag:{type:String,default:"div"},group:{type:Boolean,default:!1}},setup(e,{attrs:n,emit:o,slots:t}){const r=s.computed(()=>B(e.target,d)),a=s.computed(()=>S(e.landscape,e.portrait)),i=s.computed(()=>V(e.dark,e.light)),u=s.computed(()=>$(e.inert,e.motion)),g=s.computed(()=>r.value.includes(c.current)&&a.value.includes(c.orientation)&&i.value.includes(c.theme)&&u.value.includes(c.motionPreference)),y=p=>{if(!e.group&&t.length>0)return t;const m=[];for(let v in t){const{slotBp:D,slotOrientation:q,slotTheme:T,slotMotion:x}=me(v),z=s.computed(()=>B(D,d)),K=s.computed(()=>S(q==="landscape",q==="portrait")),Q=s.computed(()=>V(T==="dark",T==="light")),N=s.computed(()=>$(x==="inert",x==="motion"));s.computed(()=>z.value.includes(c.current)&&K.value.includes(c.orientation)&&Q.value.includes(c.theme)&&N.value.includes(c.motionPreference)).value===!0&&m.push(s.h(p||t[v],{key:v},p?t[v]():void 0))}return m.length>0?m:void 0};return t.default?()=>g.value?s.h(e.tag,{...n},t.default()):void 0:()=>{const p=Object.assign({},ve,n,{tag:e.tag}),m=e.group?s.TransitionGroup:s.Transition;return s.h(m,p,()=>y(e.listTag))}}};function w({breakpoints:e,preset:n}){const o=n?ce(n):!1,t=e?R(e):!1;if(o===!1&&!t)throw new TypeError("Vue3 Mq: You must provide a valid preset, or valid breakpoint settings.");J(t||R(o)),te(),ee();const r=ne();for(const a in r){const i=r[a];h(i,()=>{_(a)})}["portrait","landscape"].forEach(a=>{const i=()=>{j(a)};h(`(orientation: ${a})`,i)}),["light","dark"].forEach(a=>{const i=()=>{P(a)};h(`(prefers-color-scheme: ${a})`,i)}),["reduce","no-preference"].forEach(a=>{const i=()=>{A(a)};h(`(prefers-reduced-motion: ${a})`,i)})}function ge(){const e=s.inject("mq");if(e)return e;throw new Error("Vue3Mq is not installed in this app. Please follow the installation instructions and try again.")}const ye=(e,{preset:n="bootstrap5",breakpoints:o,defaultBreakpoint:t,defaultOrientation:r="landscape",defaultMotion:a="no-preference",defaultTheme:i}={})=>{try{const u=de(r),g=fe(i),y=pe(a);H(t),U(u),W(g),X(y),e.provide("mq",c),e.provide("updateBreakpoints",w),w({breakpoints:o,preset:n})}catch(u){console.error(u)}},ke={install:ye};exports.MqResponsive=he;exports.Vue3Mq=ke;exports.availableBreakpoints=d;exports.updateBreakpoints=w;exports.useMq=ge;
